const RENDER_BASE = "https://your-app.onrender.com"; // ØºÙŠÙ‘Ø± Ø¨Ø§Ù„Ø±Ø§Ø¨Ø· ØªØ¨Ø¹ Render

document.getElementById('searchForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const keyword = document.getElementById('keywordInput').value.trim();
    if (!keyword) { alert('Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ù…ÙØªØ§Ø­ÙŠØ©'); return; }

    document.getElementById('loader').classList.add('active');

    fetch(`${RENDER_BASE}/api/analyze`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ keyword })
    })
    .then(res => res.json())
    .then(data => {
        document.getElementById('loader').classList.remove('active');
        if (data.error) { alert(data.error); return; }

        // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
        const resultsGrid = document.getElementById('resultsGrid');
        resultsGrid.innerHTML = `
            <div class="result-card"><h3>ğŸ”— Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</h3><div>${data.suggested_title}</div></div>
            <div class="result-card"><h3>ğŸ“ Ø§Ù„ÙˆØµÙ</h3><div>${data.meta_description}</div></div>
            <div class="result-card"><h3>ğŸ“Œ Ø§Ù„Ù…Ù‚ØªØ·Ù</h3><div>${data.snippet_text}</div></div>
            <div class="result-card"><h3>ğŸ·ï¸ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…ÙØªØ§Ø­ÙŠØ©</h3><div>${data.nlp_keywords}</div></div>
            <div class="result-card"><h3>ğŸ“‘ Ù…Ø®Ø·Ø· Ø§Ù„Ù…Ù‚Ø§Ù„</h3><div>${data.outline.map(o => `<p>${o.text}</p>`).join('')}</div></div>
            <div class="result-card"><h3>ğŸŒ Ø§Ù„Ø±ÙˆØ§Ø¨Ø·</h3><div>${data.featured_snippets.map(l => `<a href="https://${l}" target="_blank">${l}</a>`).join('<br>')}</div></div>
        `;
        document.getElementById('results').classList.add('active');
    })
    .catch(err => {
        document.getElementById('loader').classList.remove('active');
        alert("ÙØ´Ù„ Ø§Ù„Ø§ØªØµØ§Ù„: " + err);
    });
});
